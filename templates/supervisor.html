<!DOCTYPE html>
<html>
<head>
    <title>Supervisor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<h2>Supervisor Dashboard</h2>

<!-- Filter -->
<form method="get">
    <select name="category" onchange="this.form.submit()">
        <option value="All">All Categories</option>
        {% for c in categories %}
        <option value="{{ c }}" {% if c == selected_category %}selected{% endif %}>
            {{ c }}
        </option>
        {% endfor %}
    </select>
</form>

<br>

<a href="{{ url_for('clear_inventory') }}"
   onclick="return confirm('Clear all inventory?')">
   ğŸ§¹ Clear All Inventory
</a>

<hr>

<!-- DESKTOP TABLE -->
<div class="desktop-only">
<table border="1" cellpadding="6" width="100%">
    <tr>
        <th>Date</th>
        <th>Store</th>
        <th>Category</th>
        <th>Product</th>
        <th>Qty</th>
        <th>Entered By</th>
        <th>Action</th>
    </tr>

    {% for p in products %}
    <tr>
        <td>{{ p[1].strftime("%Y-%m-%d %H:%M") }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>{{ p[4] }}</td>
        <td>{{ p[5] }}</td>
        <td>{{ p[6] }}</td>
        <td>
            <a href="{{ url_for('edit_product', pid=p[0]) }}">âœï¸ Edit</a> |
            <a href="{{ url_for('delete_product', pid=p[0]) }}"
               onclick="return confirm('Delete this item?')">âŒ Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>
</div>

<!-- MOBILE CARDS -->
<div class="mobile-only">
{% for p in products %}
<div class="card">
    <strong>{{ p[4] }}</strong><br>
    ğŸ¬ {{ p[2] }}<br>
    ğŸ—‚ {{ p[3] }}<br>
    ğŸ“¦ Qty: {{ p[5] }}<br>
    ğŸ‘¤ {{ p[6] }}<br>
    ğŸ•’ {{ p[1].strftime("%Y-%m-%d %H:%M") }}<br><br>

    <a href="{{ url_for('edit_product', pid=p[0]) }}">âœï¸ Edit</a> |
    <a href="{{ url_for('delete_product', pid=p[0]) }}"
       onclick="return confirm('Delete this item?')">âŒ Delete</a>
</div>
{% endfor %}
</div>

<!-- BOTTOM NAV (MOBILE ONLY) -->
<div class="bottom-nav">
    <a href="{{ url_for('shopkeeper') }}">Shopkeeper</a>
    <a href="{{ url_for('manage_stores') }}">Stores</a>
    <a href="{{ url_for('manage_categories') }}">Categories</a>
</div>

</body>
</html>
