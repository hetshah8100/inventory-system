<!DOCTYPE html>
<html>
<head>
    <title>Shopkeeper Inventory</title>
</head>
<body>

<h2>Shopkeeper Inventory Entry</h2>

<!-- STORE SELECT (AUTO LOAD, NO BUTTON) -->
<form method="get" action="{{ url_for('shopkeeper') }}">
    <label>Select Store:</label>
    <select name="store" onchange="this.form.submit()">
        <option value="">-- Select Store --</option>
        {% for s in stores %}
        <option value="{{ s }}" {% if selected_store == s %}selected{% endif %}>
            {{ s }}
        </option>
        {% endfor %}
    </select>
</form>

<br>

{% if selected_store %}
<!-- PRODUCT ENTRY FORM -->
<form method="post">
    <input type="hidden" name="store" value="{{ selected_store }}">

    <label>Category:</label>
    <select name="category" required>
        {% for c in categories %}
        <option value="{{ c }}">{{ c }}</option>
        {% endfor %}
    </select>

    <br><br>

    <label>Product:</label>
    <input type="text" name="product" required>

    <br><br>

    <label>Quantity:</label>
    <input type="number" name="quantity" required>

    <br><br>

    <label>Entered By:</label>
    <input type="text" name="entered_by" required>

    <br><br>

    <button type="submit">Add Product</button>
</form>

<hr>

<h3>Recent Entries for {{ selected_store }}</h3>

<table border="1" cellpadding="6">
    <tr>
        <th>Date</th>
        <th>Category</th>
        <th>Product</th>
        <th>Qty</th>
        <th>Entered By</th>
    </tr>

    {% for p in products %}
    <tr>
        <td>{{ p[0] }}</td>
        <td>{{ p[1] }}</td>
        <td>{{ p[2] }}</td>
        <td>{{ p[3] }}</td>
        <td>{{ p[4] }}</td>
    </tr>
    {% endfor %}
</table>
{% endif %}

<br>

<a href="{{ url_for('supervisor') }}">â†’ Go to Supervisor</a>

</body>
</html>
